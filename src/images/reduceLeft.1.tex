\input{_header.tex}

\matrix (a) [collection, name prefix=a] {
  \node (1) {$a_1$}; &
  \node (2) {$a_2$}; &
  \node (3) {$a_3$}; &
  \ellipsis;         &
  \node (i) {$a_i$}; &
  \ellipsis;         &
  \node (n) {$a_n$}; \\
};

\node (f1)   [below=1cm of a1.south east] {$\texttt{op}(a_1, a_2)$};
\node (f2)   [below=2cm of a2.south east] {$\texttt{op}(z_1, a_3)$};
\node (fi-1) [below=3cm of ai.south west] {$\texttt{op}(z_{i-2}, a_i)$};
\node (fn-1) [below=4cm of an.south west] {$\texttt{op}(z_{n-2}, a_n)$};
\node (b)    [elem, below=1cm of fn-1] {$b$};

\begin{scope}
  \tikzstyle{every path}=[arrow]
  \draw [out=south, in=north] (a1) to (f1.120);
  \draw [out=south, in=north] (a2) to (f1.45);
  \draw [out=east, in=north] (f1.east) to (f2.120);
  \draw [out=south, in=north] (a3) to (f2.45);
  \draw [out=east, in=north] (f2.east) to (fi-1.120);
  \draw [out=south, in=north] (ai) to (fi-1.30);
  \draw [out=east, in=north] (fi-1.east) to (fn-1.120);
  \draw [out=south, in=north] (an) to (fn-1.30);
  \draw (fn-1.south) -- (b);
\end{scope}

\input{_footer.tex}
