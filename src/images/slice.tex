\input{_header.tex}

\matrix (A) [collection] {
  \helem[.5\elementswidth]{before} &
  \node (ai) {$a_i$};       &
  \node (ai+1) {$a_{i+1}$};       &
  \helem{between}                &
  \node (ai+j-1) {$a_{i+j-1}$}; &
  \node (ai+j) {$a_{i+j}$};       &
  \node (ai+j+1) {$a_{i+j+1}$}; &
  \helem[.5\elementswidth]{after} \\
};

\matrix (B) [collection, below=2\cellheight of A, matrix anchor=north west] at (ai+1.south west) {
  \node (bi+1) {$a_{i+1}$};       &
  \helem{between}                &
  \node (bi+j-1) {$a_{i+j-1}$}; &
  \node (bi+j) {$a_{i+j}$};       \\
};

\toppointer{ai.north}{\param{from}}
\toppointer{ai+j.north}{\param{until}}

\bottombrace[a]{ai+1.south west}{ai+j.south east}
\topbrace[b]{bi+1.north west}{bi+j.north east}
\draw (a) [arrow] -- (b);

\input{_footer.tex}
