\input{_header.tex}

\matrix (A) [collection] {
  \helem[.5\elementswidth]{before} &
  \elem{a}{i-1} &
  \elem{a}{i} &
  \elem{a}{i+1} &
  \elem{a}{i+2} &
  \helem[.5\elementswidth]{after} \\
};

\matrix (T) [collection, above=2\cellheight of ai.north west, matrix anchor=south west] {
  \node (ti) {$a_i$}; &
  \node (ti+1) {$b_{i+1}$}; &
  \node (ti+2) {$a_{i+2}$}; \\
};

\toppointer{ai.north}{\param{offset}}

\topparam{T.north}{\param{that}};

\bottombrace[a]{ti.south west}{ti+2.south east}
\topbrace[b]{ai.north west}{ai+2.north east}
\draw (a) -- node [arrow label] {$=?$} (b);

\node [big arrow, right=\cellwidth of $ (ai+2.east)!.5!(ti+2.east) $];
\node [right=2\cellwidth of $ (ai+2.east)!.5!(ti+2.east) $] {$\false$};

\input{_footer.tex}
