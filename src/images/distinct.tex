\input{_header.tex}

\matrix (A) [collection] {
  \elem{a}{1} &
  \elem{a}{2} &
  \node (a3) {$a_1$}; &
  \node (a4) {$a_n$}; &
  \helem{between} &
  \node (a5) {$a_2$}; &
  \node (a6) {$a_n$}; &
  \node (a7) {$a_1$}; \\
};

\node [big arrow, below=\cellheight - .5\bigarrowwidth of A, anchor=west, rotate=-90];

\matrix (B) [collection, below=2\cellheight of A] {
  \node {$a_1$}; &
  \node {$a_2$}; &
  \helem{between} &
  \node {$a_n$}; \\
};

\draw (a3.north) -- ++(0, 0.5) coordinate (x);
\draw [name path=p1] (x) -| (a1);
\draw [name path=p2] (x) -| (a7);
\draw [name path=p3] (a2.north) -- ++(0, 1) -| (a5);
\draw [name path=p4] (a4.north) -- ++(0, 1.5) -| (a6);

\path [name intersections={of=p1 and p3, by={a}}] (a) pic {vertical bridge};
\path [name intersections={of=p2 and p3, by={a}}] (a) pic {vertical bridge};
\path [name intersections={of=p2 and p4, by={a, b}}] (a) pic {vertical bridge} (b) pic {vertical bridge};
\path [name intersections={of=p3 and p4, by={a}}] (a) pic {vertical bridge};

\input{_footer.tex}
