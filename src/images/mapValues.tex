\input{_header.tex}

\matrix (K) [map keys] {
    \node (k1)       {$k_1$};     \\
    \node (k2)       {$k_2$};     \\
    \vellipsis                    \\
    \node (ki)       {$k_i$};     \\
    \vellipsis                    \\
    \node (kn)       {$k_n$};     \\
};


\matrix (Km) [map keys, right=5cm of K] {
    \node (km1)       {$k_1$};     \\
    \node (km2)       {$k_2$};     \\
    \vellipsis                    \\
    \node (kmi)       {$k_i$};     \\
    \vellipsis                    \\
    \node (kmn)       {$k_n$};     \\
};

\foreach \i in {1, 2, i, n} {
  \node (v\i) [elem, right=1cm of k\i] {$v_{\i}$};
  \draw (k\i) [map to] -- (v\i);
  \node (vm\i) [elem, right=1cm of km\i] {$w_{\i}$};
  \draw ([xshift=17mm] k\i.north east) [topbrace] -- coordinate (x) ([shift={(17mm, 1pt)}] k\i.south east);
  \draw (x) [arrow, from brace] -- node [arrow label] {$\texttt{f}(v_{\i})$} (km\i);
  \draw (km\i) [map to] -- (vm\i);
}

\input{_footer.tex}
