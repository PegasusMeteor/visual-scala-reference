\input{_header.tex}

\matrix (A) [collection] {
  \elem{a}{1} &
  \elem{a}{2} &
  \helem{between} &
  \elem{a}{i} &
  \helem{between} &
  \elem{a}{n} \\
};

\node (z) [left=\cellwidth of A] {\param{z}};

\begin{scope}
  \tikzstyle{every node}=[internal operation, anchor=north]
  \node (op1) [below=\cellheight of a1.south west] {$\param{op}(\param{z}, a_1)$};
  \node (op2) [below=2\cellheight of a2] {$\param{op}(z_1, a_2)$};
  \node (opi) [below=3\cellheight of ai] {$\param{op}(z_{i-1}, a_i)$};
  \node (opn) [below=4\cellheight of an] {$\param{op}(z_{n-1}, a_n)$};
\end{scope}

\draw (z.south) [smooth arrow] to (op1.95);
\draw (a1.south) [smooth arrow] to (op1.45);

\draw (op1.east) [arrow] .. controls +(.5, 0) and +(0, 1) .. (op2.95); 
\draw (a2.south) [smooth arrow] to (op2.35);

\draw (op2) [out=0, in=90, arrow, middle dots] to (opi.95); 
\draw (ai.south) [smooth arrow] to (opi.30);

\draw (opi) [out=0, in=90, arrow, middle dots] to (opn.95); 
\draw (an.south) [smooth arrow] to (opn.25);

\node (zn) [below right=\cellheight and \cellwidth of opn] {$z_n$};
\draw (opn) [out=0, in=90, arrow] to (zn); 

\input{_footer.tex}
