\input{_header.tex}

\matrix (A) [collection] {
  \node (a1)   {$a_1$};     &
  \ellipsis                 &
  \node (ai)   {$a_i$};     &
  \node (ai+1) {$a_{i+1}$}; &
  \ellipsis                 &
  \node (an) {$a_n$};       \\
};

\matrix (B) [collection, below=2cm of A] {
  \node (b1)   {$a_1$};     &
  \ellipsis;                &
  \node (bi)   {$a_i$};     &
  \node (bi+1) {$a_{i+1}$}; &
  \ellipsis                 &
  \node (bn) {$a_n$};       \\
};

\node [draw, ellipse callout, callout absolute pointer={([xshift=-1mm] B.west)}] at ([xshift=-1cm] B.west) {that};

\draw (a1.south east) [draw=none] -- node {\tiny \ldots \true \, \true\, \true \ldots} (bi.north west);
\draw (ai+1.south east) [draw=none] -- node {\tiny \ldots \true \, \true\, \true \ldots} (bn.north west);

\begin{scope}
  \tikzstyle{every path}=[Latex-Latex]
  \tikzstyle{every node}=[arrow label]
  \foreach \i in {1, i, i+1, n} {
    \draw (a\i) -- node (t\i) {=? \true} (b\i);
  }
\end{scope}

\node (B) [elem, right=4cm of ti+1] {\true};
\draw [arrow] (tn) -- (B);

\draw (t1.north west) [rounded corners=0.5em] rectangle (tn.south east);

\input{_footer.tex}
