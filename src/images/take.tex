\input{_header.tex}

\matrix (A) [collection] {
  \node (a1)   {$a_1$};     &
  \node (a2)   {$a_2$};     &
  \helem{between}                &
  \node (an)   {$a_n$};     &
  \node (an+1) {$a_{n+1}$}; &
  \helem[.5\elementswidth]{after}                 \\
};

\matrix (B) [collection, below=2\cellheight of A, matrix anchor=b1.north west] at (a1.south west) {
  \node (b1) {$a_1$}; &
  \node (b2) {$a_2$}; &
  \helem{between}           &
  \node (bn) {$a_n$}; \\
};

\measure{\param{n}}{a1.north west}{an.north east}

\bottombrace[a]{a1.south west}{an.south east}
\topbrace[b]{b1.north west}{bn.north east}
\draw (a) [arrow] -- (b);

\input{_footer.tex}
