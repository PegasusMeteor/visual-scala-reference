\input{_header.tex}

\matrix (A) [collection] {
  \node (a2) {$a_2$}; &
  \ellipsis           &
  \node (an) {$a_n$}; &
  \ellipsis           &
  \node (a1) {$a_1$}; &
  \ellipsis           &
  \node (ai) {$a_i$}; \\
};

\matrix [column sep=1cm, below=1cm of A] {
  \node (lt1) [predicate, pin={[function result]right:\true}]  {$\param{lt}(a_2, a_n)?$}; &
  \node (lt2) [predicate, pin={[function result]right:\false}] {$\param{lt}(a_n, a_1)?$}; &
  \node (lt3) [predicate, pin={[function result]right:\true}]  {$\param{lt}(a_1, a_i)?$}; \\
};

\matrix [column sep=1cm, below=3cm of A] {
  \node (lt4) [predicate, pin={[function result]right:\false}] {$\param{lt}(a_2, a_1)?$}; &
  \node (lt5) [predicate, pin={[function result]right:\false}] {$\param{lt}(a_n, a_i)?$}; \\
};

\matrix (B) [collection, below=5cm of A] {
  \node (b1) {$a_1$}; &
  \node (b2) {$a_2$}; &
  \ellipsis           &
  \node (bi) {$a_i$}; &
  \ellipsis           &
  \node (bn) {$a_n$}; \\
};

\begin{scope}
  \tikzstyle{every path}=[out=270, in=90, arrow, middotted]
  \draw (a2) to (lt1.110);
  \draw (an) to (lt1.35);
  \draw (an) to (lt2.110);
  \draw (a1) to (lt2.35);
  \draw (a1) to (lt3.110);
  \draw (ai) to (lt3.35);
  \draw (lt1) to (lt4.110);
  \draw (lt2.325) to (lt4.35);
  \draw (lt2.270) to (lt5.100);
  \draw (lt3.325) to (lt5.35);
  \draw (lt4.325) to (b1);
  \draw (lt4.270) to (b2);
  \draw (lt5.325) to (bi);
  \draw (lt5.270) to (bn);
\end{scope}

\input{_footer.tex}
