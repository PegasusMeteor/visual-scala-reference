\input{_header.tex}

\node (f) [function] {$f$};
\draw [reverse arrow] (f.in 1) -- +(0, .5) node [above] {$x$};
\draw [arrow] (f.out 1) -- +(0, -.5) node [below] {$y$};

\node (g) [function, right=\cellwidth of f] {\param{g}};
\draw [reverse arrow] (g.in 1) -- +(0, .5) node [above] {$y$};
\draw [arrow] (g.out 1) -- +(0, -.5) node [below] {$u$};

\coordinate (fxg) at ($(f.south)!.5!(g.south)$);
 
\node (frwg) [function, below=3\cellheight of fxg, minimum height=5cm, minimum width=4cm] {};

\node (x) [above=.75 of frwg] {$x$};
\node (y) [below=.75 of frwg] {\true};
\node (p) [predicate evaluation, below=of frwg.north] {$\exists pf(x)?$};

\draw [arrow] (x) -- (p);

\node (f2) [function, above left=0 and .25\cellwidth of frwg.center] {$f$};
\node (g2) [function, below=of f2.out, anchor=in] {\param{g}};

\draw [arrow] (p.west) .. controls +(-.4, 0) and +(0, .4) .. node [above, scale=0.8] {\true} (f2.in 1);
\draw [arrow] (p.south) -- (y);

\node at ($ (fxg)!.5!(frwg.north) $) [big arrow, rotate=-90];

\input{_footer.tex}
