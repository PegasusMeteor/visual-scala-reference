\input{_header.tex}

\matrix (A) [collection] {
  \elem{a}{1} &
  \elem{a}{2} &
  \helem{between} &
  \elem{a}{i} &
  \helem{between} &
  \elem{a}{n} \\
};

\matrix (Z) [collection, matrix anchor=north west, below=\cellheight of A] at (A.south west) {
  \node (z1) {$(a_1, b_1)$}; &
  \node (z2) {$(a_2, b_2)$}; &
  \helem{between} &
  \node (zi) {$(a_i, b_i)$}; &
  \helem{between} &
  \node (zn) {$(a_n, b_n)$}; &
  \node (zn+1) [xscale=0.77] {$(\subparam{a}{f}, b_{n+1})$}; &
  \helem{between} &
  \node (zn+m) [xscale=0.73] {$(\subparam{a}{f}, b_{n+m})$}; \\
};
 
\matrix (B) [collection, matrix anchor=north west, below=3\cellheight of A] at (A.south west) {
  \elem{b}{1} &
  \elem{b}{2} &
  \helem{between} &
  \elem{b}{i} &
  \helem{between} &
  \elem{b}{n} &
  \elem{b}{n+1} &
  \helem{between} &
  \elem{b}{n+m} \\
};

\leftparam{B.west}{\param{that}}

\node (af) [right=1 of A] {$\subparam{a}{f}$};
\node (bf) [right=1 of B] {$\subparam{b}{f}$};

\foreach \a/\b in {1/1, 2/2, i/i, n/n, f/n+1, f/n+m} {
  \draw [arrow, erase] (a\a) -- (z\b.north) -- +(-3mm, -2ex);
  \draw [arrow, erase] (b\b) -- (z\b.south) -- +(3mm, 2ex);
}

\input{_footer.tex}
