\input{_header.tex}

\matrix (A) [collection] {
  \node (a1) {$a_1$}; &
  \node (a2) {$a_2$}; &
  \helem{between}            &
  \node (an) {$a_n$}; \\
};

\node (E) [right=\cellwidth of A] {\param{elem}};

\matrix (B) [collection, below=2\cellheight of A, matrix anchor=north west] at (A.south west) {
  \node (b1)   {$a_1$};         &
  \node (b2)   {$a_2$};         &
  \helem{between}                     &
  \node (bn)   {$a_n$};         &
  \node (bn+1) {\param{elem}}; &
  \node (bn+2) {\param{elem}}; &
  \helem{between}                     &
  \node (blen) {\param{elem}}; \\
};

\bottombrace[a]{a1.south west}{an.south east}
\topbrace[b]{b1.north west}{bn.north east}
\draw (a) [arrow] -- (b);

\foreach \i in {n+1,n+2,len} {
  \draw (E) [smooth arrow] to (b\i);
}

\measure[-4ex]{\param{len}}{B.south west}{B.south east}

\input{_footer.tex}
