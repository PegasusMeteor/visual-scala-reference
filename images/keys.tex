---
---

\matrix [collection] {
    \node (k1) {$k_1$}; \\
    \node (k2) {$k_2$}; \\
    \velementsbetween \\
    \node (kn) {$k_n$}; \\
};

\foreach \i in {1,2,n}{
    \draw [key to value] (k\i.east) to +(1, 0) node (v) [element, right] {$v_{\i}$};
    \node (v\i) [element, right=3 of v] {$k_{\i}$};
}

\tikzset{next label/.style={
    sloped,
    node contents={\texttt{next}}
}}

\draw [flow ->] ($ (v1.west) + (-1, 0) $) -- node [next label, above=0.1] {} (v1);
\draw [flow ->, bend right=45] (v1.west) to node [next label, below=0.3, rotate=180] {} (v2.west);
\draw [flow ->, dashed] (v2.west) arc [start angle=150, delta angle=30, radius=1];
\draw [<- flow, dashed] (vn.west) arc [start angle=210, delta angle=-30, radius=1];

\coordinate (kc) at ($ (k1)!.5!(kn) $);
\coordinate (vc) at ($ (v1)!.5!(vn) $);
\coordinate (x) at ($ (kc)!.5!(vc) $);
\node at (x) [big arrow];
