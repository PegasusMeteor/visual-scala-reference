---
---

\node (f) [function] {$f$};
\node (g) [function, right=.5 of f] {\texttt{g}};

\node (x) [subelement, above=.5 of f.north] {$x$};
\draw [subflow] (x) -- (f.north io 1);
\node (y) [subelement, below=.5 of f.south] {$y$};
\draw [subflow] (f.south io 1) -- (y);

\node (y') [subelement, above=.5 of g.north] {$y^\prime$};
\draw [subflow] (y') -- (g.north io 1);
\node (z) [subelement, below=.5 of g.south] {$z$};
\draw [subflow] (g.south io 1) -- (z);

\node (f2) [function, right=2 of g, anchor=south] {$f$};
\node (g2) [function, below=of f2, anchor=north] {\texttt{g}};
\coordinate (n) at ($ (f2)!.5!(g2) $);

\node (fog) [function, minimum height=2.5\masterunit, minimum width=1.3\masterunit] at (f2.south) {};

\node (x') [subelement, above=.5 of fog.north] {$x$};
\draw [subflow] (x') -- (f2.north io 1);

\node (z') [subelement, below=.5 of fog.south] {$z$};
\draw [subflow] (g2.south io 1) -- (z');

\coordinate (m) at ($ (g)!.5!(n) + (-.15, 0) $);
\node at (m) [big arrow];
